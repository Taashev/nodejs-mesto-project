# Mesto - backend
Учебный проект по разработке backend приложения Mesto. \
\
Mesto - приложение где пользователь может зарегистрироваться и авторизоваться, добавлять карточки с картинкой и описанием.\
Пользователи видят все добавленные картоки в том числе других пользователей и могут оценить их лайком.\
У пользователя есть возможность удалить добавленные им карточки, обновить аватар и данные своего профиля.\
\
Сервис должен обеспечить клиент необходимым api:
- Пользователи - создавать пользователя, получить всех пользователей, получить конкретного пользователя, обновить профиль пользователя, обновить аватар пользователя
- Карточки - получить все карточки, создать карточку, удалить карточку, поставить лайк карточке, убрать лайк с карточки.

#### Техналонический стек проекта:

- NodeJS 20.7.0
- TypeScript 5.3.3
- Express 4.18.2
- Mongoose 8.0.4
- Winston 3.11.0
- Express-winston 4.2.0
- bcryptjs 2.4.3
- jsonwebtoken 9.0.2
- celebrate 15.0.3

## Как запустить проект

#### Git clone
Клонировать репозиторий
```sh
git clone https://github.com/Taashev/nodejs-mesto-project.git
```

#### NodeJS

Убедитесь, что текущая версия NodeJS и npm на вашей машине соответствуют заявленной в проекте
```sh
node -v === 20.7.0
npm -v === 10.1.0
```
Для более гибкой работы с версиями рекомендовано использовать `nvm`\
[Репозиторий nvm](https://github.com/nvm-sh/nvm)\
После установки nvm ставим нужную версию nodejs
```sh
nvm install 20.7.0
```
находясь в директории проекта ввести команду
```sh
nvm use
```

#### TypeScript

Убедитесь, что у вас установлен TypeScript\
команда `tsc -v` должна вернуть текущую версию TypeScript\
в ином случае установите его
```sh
npm i -g typescript
```

#### MongoDB

Необходима установленная СУДБ MongoDB.\
По умолчанию в проекте используется имя базы данных `mestodb`\
Можно переопределить имя БД через переменные окружения `DB_NAME`

#### Переменные окружения
Перменные окружения можно задать через файл `.env` создав его в корне проекта

Список пременных окружения по умолчанию:
```sh
NODE_ENV=development
DB_NAME=mestodb
HOST_NAME=localhost
PORT=3000
SECRET_KEY=secret-key
```

#### Запуск

**Установить зависимости**
```sh
npm i
```
**Запустить проект в режиме разработки**
```sh
npm run dev
```
**Собрать проект**
```sh
npm build
```
**Запустить сборку**
```sh
npm run start
```

## API

`POST` **/signin** - авторизоваться \
`POST` **/signup** - создать пользователя \
`GET`   **/signout** - выйти из системы \

#### #users

`GET` **/users** - получить всех пользователей \
`GET` **/users/me** - получить информацию о текущем пользователе \
`GET` **/users/:id** - получить пользователя по id \
`PATH` **/users/me** - обновить профиль пользователя \
`PATCH` **/users/me/avatar** - обноавить аватар пользователя

#### #cards

`GET` **/cards** - получить все карточки \
`POST` **/cards** - создать карточку \
`PUT/` **/cards/:cardId/likes** - добавить лайк карточке \
`DELETE` **/cards/:cardId** - удалить карточку \
`DELETE` **/cards/:cardId/likes** - удалить лайк у карточки

---

### [GitHub репозиторий проекта](https://github.com/Taashev/nodejs-mesto-project)
