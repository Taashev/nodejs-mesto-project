# Mesto - backend
Учебный проект по разработке backend для приложения Mesto. \
\
Приложение где пользователь может зарегистрироваться и авторизоваться, добавлять карточки с картинкой и описанием.\
Пользователи видят все добавленные картоки и в том числе других пользователей и могут оценить их лайком.\
У пользователя есть возможно удалить добавленные им карточки, обновить аватар и данные своего профиля.\
\
Сервис должен обеспечить клиент необходимым api:
- Пользователи - создавать пользователя, получить всех пользователей, получить конкретного пользователя, обновить профиль пользователя, обновить аватар пользователя
- Карточки - получить все карточки, создать карточку, удалить карточку, поставить лайк карточке, убрать лайк с карточки.

#### Техналонический стех проекта:

- NodeJS 20.7.0
- TypeScript 5.3.3
- Express 4.18.2
- Mongoose 8.0.4
- Winston 3.11.0
- Express-winston 4.2.0

## Как запустить проект

#### Git clone
Клонировать репозиторий
```sh
git clone https://github.com/Taashev/nodejs-mesto-project.git
```

#### NodeJS

Убедитесь, что текущая версия NodeJS и npm на вашей машине соответствует заявленной в проекте
`node -v === 20.7.0`\
Для более гибкой работы с версиями рекомендовано использовать `nvm`\
[Репозиторий nvm](https://github.com/nvm-sh/nvm)\
После установки nvm ставим нужную версию nodejs
```sh
nvm install 20.7.0
```
теперь достаточно находясь в директории проекта ввести команду
```sh
npm use
```

#### TypeScript

Убедитесь, что у вас установлен TypeScript\
команда `tsc -v` должена вернуть текущую версию TypeScript\
в ином случае установите его\
```sh
npm i -g typescript
```

#### MongoDB

Для успешного запуска необходимо установленая СУДБ MongoDB.\
По умолчанию в проекте прописано имя базы данных "mestodb" вам необходимо создать такую базу для корректной работы.

#### Запуск
По умолчанию проект настроен на `localhost`\
Порт по умолчанию `3000` но его можно изменить через переменную окружения `PORT`\
```sh
PORT=3001 npm run dev
```
\
Установить зависимости
```sh
npm i
```
Запустить проект в режиме разработки
```sh
npm run dev
```
Собрать проект
```sh
npm build
```
Запустить сборку
```sh
npm run start
```

## API

#### users

`GET` **/users** - получить всех пользователей \
`GET` **/users/:id** - получить пользователя по id \
`POST` **/users** - создать пользователя \
`PATH` **/users/me** - обновить профиль пользователя \
`PATCH` **/users/me/avatar** - обноавить аватар пользователя

#### cards

`GET` **/cards** - получить все карточки \
`POST` **/cards** - создать карточку \
`PUT/` **/cards/:cardId/likes** - добавить лайк карточке \
`DELETE` **/cards/:cardId** - удалить карточку \
`DELETE` **/cards/:cardId/likes** - удалить лайк у карточке
